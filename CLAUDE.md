# CLAUDE.md

このファイルは、Claude Code (claude.ai/code) がこのリポジトリで作業する際のガイダンスを提供します。

## 重要な指示
**このプロジェクトでは日本語で対応してください。**

## プロジェクト概要

これはdiscord.js v14で構築されたValorant用LFG（Looking For Group）募集BOTです。プレイヤーがチームメイトを探すための募集を作成・管理し、自動的にボイスチャンネルを作成する機能を提供します。スラッシュコマンドを使用し、ポート3000でシンプルなWebインターフェースをホスティングするExpressウェブサーバーが含まれています。

## アーキテクチャ

### エントリーポイント
- **server.js**: メインエントリーポイント。ポート3000でExpressサーバーを起動し、Discord BOTを読み込む
- **main.js**: Discordクライアントを初期化し、コマンドとイベントを読み込み、インタラクションを処理

### コマンドシステム
- コマンドは`/commands`ディレクトリに個別の`.js`ファイルとして保存
- 各コマンドは`data`（SlashCommandBuilder）と`execute`関数をエクスポート
- コマンドは`deploy-commands.js`を介して自動的に登録される
- コマンドシグネチャ: `execute(client, interaction)`

#### 実装済みコマンド
- **/ping**: API遅延を測定
- **/lfg create**: Valorant募集を作成（ゲームモード、ランク、募集人数を指定）
- **/lfg list**: 現在の募集一覧を表示
- **/lfg delete**: 自分の募集を削除

### イベントシステム
- イベントは`/events`ディレクトリに保存
- イベントは`once`（一度だけ発火）または通常（毎回発火）にできる
- イベントは自動的に読み込まれ、クライアントにアタッチされる

## 開発コマンド

```bash
# ウェブサーバー付きでBOTを起動
npm start

# BOTを直接実行（ウェブサーバーなし）
node main.js

# 依存関係をインストール
npm install
```

## 設定要件

1. Discord BOTトークンを含む`.env`ファイルを作成:
```
TOKEN=あなたのDiscord_BOTトークン
```

2. `config.json`をあなたのDiscordアプリケーションIDで更新:
```json
{
  "clientId": "あなたのアプリケーションID",
  "guildId": "あなたのテストサーバーID"
}
```

## 実装上の重要な注意事項

- BOTには以下のインテントが必要: Guilds, GuildMessages, MessageContent, GuildMembers, GuildMessageReactions, GuildVoiceStates
- コマンドはギルド固有（config.jsonのguildIdにデプロイ）
- Webインターフェースは`/pages`ディレクトリから静的ファイルを提供
- すべてのDiscord APIインタラクションはdiscord.js v14のパターンを使用
- ユーザー向けメッセージとコメントは日本語を使用

## Valorant募集BOT機能詳細

### 募集システム
- ユーザーは1人1つまで募集を作成可能
- 募集にはゲームモード、ランク帯、募集人数、説明を設定
- 参加/離脱はボタンインタラクションで管理
- 満員になると自動で色が変わり通知

### ボイスチャンネル管理
- 「開始する」ボタンで自動的にボイスチャンネルを作成
- チャンネルは30分後に自動削除
- 参加者のみがアクセス可能な権限設定
- カテゴリ「Valorant」があれば自動的にその下に作成

### サポートされているランク
- アイアン、ブロンズ、シルバー、ゴールド、プラチナ、ダイヤモンド、アセンダント、イモータル、レディアント

### サポートされているゲームモード
- コンペティティブ、アンレート、スパイクラッシュ、デスマッチ、エスカレーション、レプリケーション、カスタム